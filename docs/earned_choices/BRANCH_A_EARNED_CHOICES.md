# Branch A Earned Choices 规则设计

## 1) Requires 规则表（Depth 5-9）

| lastChoice | requires 条件 | fallback | 理由 |
|-----------|-------------|---------|------|
| 1a_6c | courage_level >= 2 | 1a_6 | 谨慎确认选项需要一定勇气，否则直接接受邀请 |
| 1a_6e_a | courage_level >= 2 | 1a_6e_b | 关系发展路径需要主动勇气，否则走信任建立路径 |
| 1a_6c | courage_level >= 2 | 1a_6d | 关系发展需要勇气，否则走友谊路径 |
| 1a_7a | courage_level >= 2 | 1a_7b | "不只是朋友"需要勇气，否则走友谊路径 |
| 1a_7c | courage_level >= 2 | 1a_7d | 解释/坦白需要勇气，否则逃避 |
| 1a_7e_a | courage_level >= 2 | 1a_7e_b | 坦白路径需要勇气，否则保持距离 |
| 1a_8a | courage_level >= 2 | 1a_8b | "重新开始"需要勇气，否则犹豫不决 |
| 1a_8a | courage_level >= 2, historyIncludes: ['1a_7c'] | 1a_8b | 重逢尝试需要勇气+之前坦白，否则犹豫 |
| 1a_9a | courage_level >= 2 | 1a_9b | 最终坦白需要勇气，否则放弃 |
| 1a_9e | courage_level >= 2 | 1a_9d | 最终坦白需要勇气，否则祝福 |

### 统计
- **规则总数**: 10（超出要求的 8）
- **覆盖 depth**: 5-9
- **主要条件**: `courage_level >= 2`（高勇气门槛）

## 2) 神选项风险点表

| lastChoice | 为什么是神选项 | 应加的门槛 |
|-----------|-------------|-----------|
| 1a_6c | 谨慎确认选项（"你真的不介意吗"）需要主角有足够的勇气和自信才能提出，低勇气时不应该有这个选项 | `courage_level >= 2` + 之前选择过主动选项（如 `1a_4` 或 `1a_6`） |
| 1a_7a | "我想……不只是朋友"是关系推进的关键节点，需要主角有足够的勇气和关系基础才能表达，否则显得突兀 | `courage_level >= 2` + `historyIncludes: ['1a_6a']`（之前积极回应过） |
| 1a_8a | "那现在，我们可以重新开始吗"是挽回的关键节点，需要主角有足够的勇气和之前的坦白基础，否则不应该有这个选项 | `courage_level >= 2` + `historyIncludes: ['1a_7c']`（之前坦白过） |

### 说明
- **1a_6c**: 这个选项出现在 `SCENE_1A_CONFRONT`，是主角在接受邀请前的谨慎确认。如果勇气太低，主角不应该有这个"确认"的自信，应该直接接受或拒绝。
- **1a_7a**: 这个选项出现在 `SCENE_1A_BUILDING_TRUST`，是关系推进的关键。如果勇气太低或之前没有积极回应，这个选项会显得突兀和不自然。
- **1a_8a**: 这个选项出现在 `SCENE_1A_8A_CONFESSION`，是挽回的关键。如果勇气太低或之前没有坦白，这个选项会显得不真实。

## 3) 规则实现建议

### 优先级规则
1. **高优先级**（必须实现）：
   - `1a_7a` (depth 7/8) - 关系推进关键节点
   - `1a_8a` (depth 8) - 挽回关键节点
   - `1a_9a` (depth 9) - 最终坦白关键节点

2. **中优先级**（推荐实现）：
   - `1a_6c` (depth 5) - 谨慎确认选项
   - `1a_7c` (depth 7) - 坦白选项
   - `1a_6e_a` (depth 6) - 关系发展路径

3. **低优先级**（可选实现）：
   - `1a_7e_a` (depth 7) - 坦白变体
   - `1a_9e` (depth 9) - 最终坦白变体

### Fallback 策略
- **勇气不足时**：自动重定向到对应的"保守/逃避"选项
- **历史条件不满足时**：自动重定向到对应的"替代路径"
- **双重条件不满足时**：优先检查勇气，再检查历史


